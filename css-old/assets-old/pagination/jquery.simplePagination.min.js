(function (n) { var t = { init: function (i) { var r = n.extend({ items: 1, itemsOnPage: 1, pages: 0, displayedPages: 5, edges: 2, currentPage: 1, hrefTextPrefix: "#page-", hrefTextSuffix: "", prevText: '<i class="fa fa-backward" aria-hidden="true"><\/i>', nextText: '<i class="fa fa-forward" aria-hidden="true"><\/i>', ellipseText: "&hellip;", cssStyle: "light-theme", labelMap: [], selectOnClick: !0, nextAtFront: !1, onPageClick: function () { }, onInit: function () { } }, i || {}), u = this; return r.pages = r.pages ? r.pages : Math.ceil(r.items / r.itemsOnPage) ? Math.ceil(r.items / r.itemsOnPage) : 1, r.currentPage = r.currentPage - 1, r.halfDisplayed = r.displayedPages / 2, this.each(function () { u.addClass(r.cssStyle + " simple-pagination").data("pagination", r); t._draw.call(u) }), r.onInit(), this }, selectPage: function (n) { return t._selectPage.call(this, n - 1), this }, prevPage: function () { var n = this.data("pagination"); return n.currentPage > 0 && t._selectPage.call(this, n.currentPage - 1), this }, nextPage: function () { var n = this.data("pagination"); return n.currentPage < n.pages - 1 && t._selectPage.call(this, n.currentPage + 1), this }, getPagesCount: function () { return this.data("pagination").pages }, getCurrentPage: function () { return this.data("pagination").currentPage + 1 }, destroy: function () { return this.empty(), this }, drawPage: function (n) { var i = this.data("pagination"); return i.currentPage = n - 1, this.data("pagination", i), t._draw.call(this), this }, redraw: function () { return t._draw.call(this), this }, disable: function () { var n = this.data("pagination"); return n.disabled = !0, this.data("pagination", n), t._draw.call(this), this }, enable: function () { var n = this.data("pagination"); return n.disabled = !1, this.data("pagination", n), t._draw.call(this), this }, updateItems: function (n) { var i = this.data("pagination"); i.items = n; i.pages = t._getPages(i); this.data("pagination", i); t._draw.call(this) }, updateItemsOnPage: function (n) { var i = this.data("pagination"); return i.itemsOnPage = n, i.pages = t._getPages(i), this.data("pagination", i), t._selectPage.call(this, 0), this }, _draw: function () { var i = this.data("pagination"), r = t._getInterval(i), u, e, f, o, s; if (t.destroy.call(this), e = typeof this.prop == "function" ? this.prop("tagName") : this.attr("tagName"), f = e === "UL" ? this : n("<ul><\/ul>").appendTo(this), i.prevText && t._appendItem.call(this, i.currentPage - 1, { text: i.prevText, classes: "prev" }), i.nextText && i.nextAtFront && t._appendItem.call(this, i.currentPage + 1, { text: i.nextText, classes: "next" }), r.start > 0 && i.edges > 0) { for (o = Math.min(i.edges, r.start), u = 0; u < o; u++)t._appendItem.call(this, u); i.edges < r.start && r.start - i.edges != 1 ? f.append('<li class="disabled"><span class="ellipse">' + i.ellipseText + "<\/span><\/li>") : r.start - i.edges == 1 && t._appendItem.call(this, i.edges) } for (u = r.start; u < r.end; u++)t._appendItem.call(this, u); if (r.end < i.pages && i.edges > 0) for (i.pages - i.edges > r.end && i.pages - i.edges - r.end != 1 ? f.append('<li class="disabled"><span class="ellipse">' + i.ellipseText + "<\/span><\/li>") : i.pages - i.edges - r.end == 1 && t._appendItem.call(this, r.end++), s = Math.max(i.pages - i.edges, r.end), u = s; u < i.pages; u++)t._appendItem.call(this, u); i.nextText && !i.nextAtFront && t._appendItem.call(this, i.currentPage + 1, { text: i.nextText, classes: "next" }) }, _getPages: function (n) { var t = Math.ceil(n.items / n.itemsOnPage); return t || 1 }, _getInterval: function (n) { return { start: Math.ceil(n.currentPage > n.halfDisplayed ? Math.max(Math.min(n.currentPage - n.halfDisplayed, n.pages - n.displayedPages), 0) : 0), end: Math.ceil(n.currentPage > n.halfDisplayed ? Math.min(n.currentPage + n.halfDisplayed, n.pages) : Math.min(n.displayedPages, n.pages)) } }, _appendItem: function (i, r) { var s = this, f, e, u = s.data("pagination"), o = n("<li><\/li>"), h = s.find("ul"); i = i < 0 ? 0 : i < u.pages ? i : u.pages - 1; f = { text: i + 1, classes: "" }; u.labelMap.length && u.labelMap[i] && (f.text = u.labelMap[i]); f = n.extend(f, r || {}); i == u.currentPage || u.disabled ? (u.disabled ? o.addClass("disabled") : o.addClass("active"), e = n('<span class="current">' + f.text + "<\/span>")) : (e = n('<a href="' + u.hrefTextPrefix + (i + 1) + u.hrefTextSuffix + '" class="page-link">' + f.text + "<\/a>"), e.click(function (n) { return t._selectPage.call(s, i, n) })); f.classes && e.addClass(f.classes); o.append(e); h.length ? h.append(o) : s.append(o) }, _selectPage: function (n, i) { var r = this.data("pagination"); r.currentPage = n; r.selectOnClick && t._draw.call(this); return r.onPageClick(n + 1, i) } }; n.fn.pagination = function (i) { if (t[i] && i.charAt(0) != "_") return t[i].apply(this, Array.prototype.slice.call(arguments, 1)); if (typeof i != "object" && i) n.error("Method " + i + " does not exist on jQuery.pagination"); else return t.init.apply(this, arguments) } })(jQuery);
function AFG() {
    var me = edu.system;
    var strtemp2 = '';
    try {
        me["loginsection"] = edu.util.uuid();
        if (typeof (AXYZCLRVN) == "function") strtemp2 = AXYZCLRVN();

        var oConfig = { iDisableChucNang: true };
        console.log(oConfig);
        if (strtemp2) {
            oConfig = JSON.parse(AD(strtemp2, "AzzS"));
            console.log(oConfig);
            if (!strtemp2) me.makeLog("LOGINERR2", me["loginsection"] + strtemp2);
        }
        me.makeLog("LOGINDATA", me["loginsection"] + strtemp2);

        var strhost = location.origin;
        if (strhost.indexOf("localhost:") !== -1) {
            strhost = location.protocol + "//" + location.hostname;//dành cho test local
            me.strlogouturl = location.origin + "/Logout.aspx";
        }
        else {
            var strsite = location.pathname.split('/');
            me.strlogouturl = location.origin + "/" + strsite[1] + "/Logout.aspx";
        }
        me.strhost = strhost;
        me.rootPath = strhost + oConfig.rootPath;
        me.rootPathUpload = oConfig.rootPathUpload;
        me.rootPathReport = oConfig.rootPathReport;

        me.apiUrl = strhost + oConfig.rootPathAPI;
        me.apiUrlTemp = strhost;

        me.folderAvatar = oConfig.folderAvatar;
        me.folderDoc = oConfig.folderDoc;

        me.appId = oConfig.appId;
        me.clientIP = oConfig.clientIP;

        me.userId = oConfig.userId;
        //me.userId = oConfig.userId;
        me.langId = oConfig.langId;
        var browser = me.getBrowser();
        me.browsername = browser.name;

        me.tokenJWT = oConfig.tokenJWT;
        me["raven"] = oConfig.raven;
        //
        if (me.rootPathUpload && me.rootPathUpload.indexOf("http") === -1) {
            me.rootPathUpload = strhost + me.rootPathUpload;
        }
        //
        var imgavatar = "";
        if (edu.util.checkValue(oConfig.avatar)) {
            imgavatar = me.rootPathUpload + "/" + oConfig.avatar;
        } else {
            imgavatar = me.rootPathUpload + "/Core/images/no-avatar.png";
        }
        $("#imgavatar").attr("src", imgavatar);
        $("#imgavatardrop").attr("src", imgavatar);

        me.appCode = $("#lbLogo_mini").html();
        //localStorage.removeItem("strIM");
        try {
            me["iM"] = "AzzSystem";
            me["iShk"] = false;
            var check = localStorage.getItem("iShk");
            if (check == "true") me.iShk = true;

            var check = localStorage.getItem("strIM");
            if (check == "false") me.iM = "";

        } catch{

        }
        if (!oConfig.iDisableChucNang && $("#lblDisableChucNang").length == 0) {
            var objCheck = sessionStorage.getItem("objUserN");
            if (objCheck) {
                try {
                    if (objCheck.indexOf("userId") != -1) {
                        sessionStorage.removeItem("objUserVT"); $("#btnLogout").trigger("click");
                    }
                    objCheck = AD(objCheck, "31415926535");
                    var objUser = JSON.parse(objCheck);
                    me.userId = objUser.userId;
                    me.appId = objUser.appId;
                    me.appCode = objUser.appCode;
                    me.raven = objUser.raven;
                    me.rootPathReport = objUser.rootPathReport;
                    imgavatar = objUser.userAvartar;
                    me.strChucNang_Id = objUser.strChucNang_Id;
                    $("#imgavatar").attr("src", imgavatar);
                    $("#imgavatardrop").attr("src", imgavatar);
                    me.getlistByUser_ChucNang();
                    $("#lbLogo_large").html(objUser.lbLogo_large)
                    $(".user-image span").html(objUser.userName)
                    $("div[class='nav-account'] span:eq(0)").html(objUser.userName);
                    $("#lblHoTenNguoiDangNhap").html(objUser.userName);
                } catch {
                    sessionStorage.removeItem("objUserVT");
                    me.getlistByUser_ChucNang();
                }

                //document.title = objUser.lbLogo_large;
            } else {
                sessionStorage.removeItem("objUserVT");
                me.getlistByUser_ChucNang();
            }
            //me.getlistByUser_ChucNang();
            var tcheck = me.userId;
            checkt()
            function checkt() {
                if (tcheck != me.userId) {
                    sessionStorage.removeItem("objUserVT");
                    $("#btnLogout").trigger("click");
                }
                try {
                    if (me.raven && me.strhost.indexOf('https') != -1) {
                        verifySignature(me.userId, me.raven).then(
                            isValid => { if (!isValid) /*$("#btnLogout").trigger("click");*/ me.makeLog("LOGINPHA", me.userId + ":" + me.raven); }
                        );
                    }
                } catch{

                }
                setTimeout(function () {
                    checkt();
                }, 1000);
            }
            me.makeLog("LOGINGETCHUCNANG", me["loginsection"] + oConfig.userId);
            //me.getlistByUser_ChucNang();
            window.history.pushState("object or string", "Title", "/" + window.location.href.substring(window.location.href.indexOf('/') + 1).split("?")[0]);
        }
    } catch (err) {
        var tempLog = me["loginsection"] + ":" + strtemp2 + ":" + err.message;
        me.makeLog("LOGINERR", tempLog);
        sessionStorage.removeItem("objUserVT"); location.href = "Logout.aspx";
    }
}
function AS() {
    var me = edu.system;
    try {
        var objUser = {
            userId: me.userId,
            appId: me.appId,
            appCode: me.appCode,
            userName: $("#lblHoTenNguoiDangNhap").html(),
            rootPathReport: me.rootPathReport,
            userAvartar: $("#imgavatar").attr("src"),
            strChucNang_Id: me.strChucNang_Id,
            raven: me.raven
        };
        sessionStorage.setItem("objUserVT", AE(JSON.stringify(objUser), "31415926535"));
    } catch (err) {
        var tempLog = err.message + me.userId;
        me.makeLog("LOGINERR", tempLog);
    }
}
async function importPublicKey() {
    var pem = '-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5Sphr8xHMwqFqq0OPii84yqbIt3FYTcus2Axxn4/uMp3kyJCzb/ME3plEUJEAxP0Wp6MbPsY5VKj0sXnAjcuVZPaCbiyAVDN+mf3muLZlpPHZYForTZPRKbehzqirsI0+MHY2uckhAVtJKVyhEftWWVzR6yEBjSN4yGPt1NUw5r23SpwtkrgE0EjOcR9bYxz3nZfSVv/zBMKssj1VtLTaOf9xPYs3tg6YwaSRqrubTZjMq12jgbMfsN9GvPjfMCoh1dZl+YXYpV8I7EWKZkk/cq60OzojybyRwrVkKqWlDfF+w1elvw6RH8v2WdNOCzlBCCoUkNqJWHkfxrw8iYcqwIDAQAB-----END PUBLIC KEY-----';
    const pemHeader = "-----BEGIN PUBLIC KEY-----";
    const pemFooter = "-----END PUBLIC KEY-----";

    const pemContents = pem
        .replace(pemHeader, "")
        .replace(pemFooter, "")
        .replace(/\s+/g, "");

    const binaryDer = Uint8Array.from(atob(pemContents), c => c.charCodeAt(0));

    return crypto.subtle.importKey(
        "spki",
        binaryDer.buffer,
        {
            name: "RSASSA-PKCS1-v1_5",
            hash: "SHA-256"
        },
        false,
        ["verify"]
    );
}
async function verifySignature(data, signatureBase64) {
    const publicKey = await importPublicKey();

    const signature = Uint8Array.from(atob(signatureBase64), c => c.charCodeAt(0));

    return crypto.subtle.verify(
        {
            name: "RSASSA-PKCS1-v1_5"
        },
        publicKey,
        signature,
        new TextEncoder().encode(data)
    );
}